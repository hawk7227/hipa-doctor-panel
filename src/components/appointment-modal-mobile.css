/* ============================================ */
/* APPOINTMENT DETAIL MODAL - MOBILE FIXES     */
/* APPEND THIS TO THE END OF availability.css  */
/* ============================================ */
/* Zero changes to desktop styles              */
/* All rules inside @media queries only        */
/* ============================================ */

@media (max-width: 768px) {
  /* ===========================================
     EXPANDED MODAL: Hide sidebar, full width
     Target: .fixed.top-0.right-0.h-full.w-full.z-50.flex
     =========================================== */
  
  /* Hide the left calendar sidebar on mobile */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex > div:first-child {
    display: none !important;
  }
  
  /* Make the main panel (flex-1) full width */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex > .flex-1 {
    width: 100% !important;
    max-width: 100vw !important;
  }

  /* ===========================================
     MODAL HEADER
     =========================================== */
  
  /* Header container - compact padding */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .sticky.top-0.bg-slate-900\/95 {
    padding: 8px 10px !important;
  }
  
  /* Window controls row (minimize/restore/close) */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .sticky.top-0 > .flex.items-center.gap-1.mb-2 {
    margin-bottom: 4px !important;
  }
  
  /* Window control buttons */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .sticky.top-0 > .flex.items-center.gap-1 > button {
    width: 28px !important;
    height: 28px !important;
  }
  
  /* Second row - appointment info and buttons */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .sticky.top-0 > .flex.items-center.justify-between {
    flex-direction: column !important;
    align-items: flex-start !important;
    gap: 8px !important;
  }
  
  /* Appointment title (h2) */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .sticky.top-0 h2.text-white.font-bold {
    font-size: 12px !important;
    line-height: 1.4 !important;
    width: 100% !important;
  }
  
  /* Status badge inside title */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .sticky.top-0 h2 > span {
    font-size: 9px !important;
    padding: 2px 6px !important;
    margin-left: 4px !important;
  }
  
  /* ===========================================
     EHR ACTION BUTTONS ROW - Horizontal scroll
     =========================================== */
  
  /* Buttons container - horizontal scroll */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .flex.items-center.gap-2.flex-wrap {
    flex-wrap: nowrap !important;
    overflow-x: auto !important;
    -webkit-overflow-scrolling: touch !important;
    scrollbar-width: none !important;
    width: 100% !important;
    padding-bottom: 4px !important;
    gap: 4px !important;
  }
  
  /* Hide scrollbar */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .flex.items-center.gap-2.flex-wrap::-webkit-scrollbar {
    display: none !important;
  }
  
  /* All action buttons - smaller, no wrap */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .flex.items-center.gap-2.flex-wrap > button {
    padding: 5px 8px !important;
    font-size: 9px !important;
    white-space: nowrap !important;
    flex-shrink: 0 !important;
    gap: 4px !important;
  }
  
  /* Button icons */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .flex.items-center.gap-2.flex-wrap > button svg {
    width: 12px !important;
    height: 12px !important;
  }

  /* ===========================================
     MODAL CONTENT AREA
     =========================================== */
  
  /* Content scrollable area */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .flex-1.overflow-y-auto.p-4,
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .flex-1.overflow-y-auto.p-6 {
    padding: 10px !important;
  }
  
  /* Grid layout - single column on mobile */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .grid.grid-cols-1.lg\:grid-cols-2 {
    grid-template-columns: 1fr !important;
    gap: 10px !important;
  }
  
  /* Left and right panel spacing */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .space-y-4,
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .space-y-6 {
    --tw-space-y-reverse: 0 !important;
    margin-top: 0 !important;
    margin-bottom: 0 !important;
  }
  
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .space-y-4 > * + *,
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .space-y-6 > * + * {
    margin-top: 10px !important;
  }

  /* ===========================================
     PATIENT HEADER CARD
     =========================================== */
  
  /* Patient info card container */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="bg-gradient-to-br"][class*="rounded-xl"] {
    padding: 10px !important;
    border-radius: 10px !important;
  }
  
  /* Patient name */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="text-xl"][class*="font-bold"] {
    font-size: 16px !important;
  }
  
  /* Patient info grid (Name, Email, Phone, DOB, Address, Pharmacy) */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="grid-cols-2"][class*="md:grid-cols-4"],
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="grid-cols-4"] {
    grid-template-columns: 1fr 1fr !important;
    gap: 8px !important;
  }
  
  /* Field labels */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="text-gray-400"][class*="text-xs"] {
    font-size: 9px !important;
  }
  
  /* Field values */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="text-white"][class*="font-semibold"][class*="text-sm"] {
    font-size: 11px !important;
    word-break: break-word !important;
  }
  
  /* Intake form grid */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="grid-cols-3"] {
    grid-template-columns: 1fr 1fr 1fr !important;
    gap: 6px !important;
  }

  /* ===========================================
     MOVE / RESCHEDULE / CANCEL FORMS
     =========================================== */
  
  /* Form containers */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="bg-cyan-900\/50"],
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="bg-orange-900\/50"],
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="bg-red-900\/50"] {
    padding: 10px !important;
    margin-top: 8px !important;
  }
  
  /* Form content rows - stack vertically */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="bg-cyan-900\/50"] .flex.items-center.gap-3,
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="bg-orange-900\/50"] .flex.items-center.gap-3 {
    flex-direction: column !important;
    align-items: stretch !important;
    gap: 8px !important;
  }
  
  /* Cancel confirm - stack buttons */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="bg-red-900\/50"] .flex.items-center.justify-between {
    flex-direction: column !important;
    gap: 10px !important;
  }
  
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="bg-red-900\/50"] .flex.items-center.gap-2 {
    width: 100% !important;
    justify-content: stretch !important;
  }
  
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="bg-red-900\/50"] .flex.items-center.gap-2 > button {
    flex: 1 !important;
  }
  
  /* Date/time inputs - full width, prevent iOS zoom */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex input[type="datetime-local"],
  .fixed.top-0.right-0.h-full.w-full.z-50.flex input[type="time"],
  .fixed.top-0.right-0.h-full.w-full.z-50.flex input[type="date"],
  .fixed.top-0.right-0.h-full.w-full.z-50.flex select {
    width: 100% !important;
    font-size: 16px !important;
    padding: 10px !important;
  }

  /* ===========================================
     SECTION CARDS (SOAP, Prescriptions, etc.)
     =========================================== */
  
  /* Section card containers */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="rounded-xl"][class*="border"][class*="p-4"],
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="rounded-xl"][class*="border"][class*="p-6"] {
    padding: 10px !important;
    border-radius: 10px !important;
  }
  
  /* Section headers */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex h3[class*="font-semibold"] {
    font-size: 13px !important;
  }
  
  /* Tab buttons row */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="flex"][class*="gap-2"][class*="mb-"] {
    flex-wrap: wrap !important;
    gap: 4px !important;
  }
  
  /* Tab buttons */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="flex"][class*="gap-2"] > button[class*="rounded-lg"][class*="text-xs"] {
    padding: 5px 8px !important;
    font-size: 10px !important;
  }
  
  /* Text areas */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex textarea {
    font-size: 14px !important;
    min-height: 80px !important;
  }
  
  /* CDSS Panel */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="bg-teal-900\/30"] {
    padding: 10px !important;
  }
  
  /* Generate CDSS button */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="bg-teal-600"][class*="rounded-lg"] {
    padding: 8px 12px !important;
    font-size: 11px !important;
  }

  /* ===========================================
     PRESCRIPTION / ERX SECTION
     =========================================== */
  
  /* Rx form grid */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="grid"][class*="gap-3"] {
    grid-template-columns: 1fr !important;
    gap: 8px !important;
  }
  
  /* Rx inputs */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex input[class*="bg-slate"],
  .fixed.top-0.right-0.h-full.w-full.z-50.flex input[class*="bg-gray"] {
    font-size: 14px !important;
    padding: 10px !important;
  }

  /* ===========================================
     COMMUNICATION PANELS (SMS, Call, Email)
     =========================================== */
  
  /* Panel containers */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [data-section-id="sms-section"],
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [data-section-id="call-section"],
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [data-section-id="email-section"] {
    padding: 8px !important;
  }
  
  /* Phone inputs */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex input[type="tel"] {
    font-size: 16px !important;
  }

  /* ===========================================
     MINIMIZED STATE - Full width bar
     =========================================== */
  
  .fixed.bottom-4.right-4 {
    bottom: calc(12px + env(safe-area-inset-bottom)) !important;
    right: 10px !important;
    left: 10px !important;
    max-width: none !important;
    border-radius: 12px !important;
  }
  
  /* Minimized bar content */
  .fixed.bottom-4.right-4 > div {
    padding: 8px 10px !important;
    flex-wrap: wrap !important;
    gap: 6px !important;
  }
  
  /* Minimized bar - patient info */
  .fixed.bottom-4.right-4 .text-white.font-medium {
    font-size: 12px !important;
  }
  
  .fixed.bottom-4.right-4 .text-gray-400 {
    font-size: 10px !important;
  }
  
  /* Minimized bar buttons */
  .fixed.bottom-4.right-4 button {
    padding: 5px 8px !important;
    font-size: 9px !important;
  }
  
  /* Minimized bar - action buttons row */
  .fixed.bottom-4.right-4 .flex.items-center.gap-2 {
    flex-wrap: wrap !important;
    gap: 4px !important;
  }
}

/* ===========================================
   OVERLAY PANELS (MedicationHistory, Orders,
   Prescriptions, Allergies, Vitals, etc.)
   =========================================== */

@media (max-width: 768px) {
  /* All overlay panels - full width */
  .fixed.inset-0 > div[class*="w-full"][class*="max-w-"] {
    max-width: 100% !important;
  }
  
  /* Panels that slide from right */
  .fixed.inset-y-0.right-0,
  .fixed.top-0.right-0.bottom-0 {
    width: 100% !important;
    max-width: 100% !important;
  }
  
  /* Panel headers */
  .fixed.inset-0 .sticky.top-0 {
    padding: 10px 12px !important;
  }
  
  .fixed.inset-0 .sticky.top-0 h2 {
    font-size: 15px !important;
  }
  
  /* Panel content */
  .fixed.inset-0 .overflow-y-auto.p-4,
  .fixed.inset-0 .overflow-y-auto.p-6 {
    padding: 10px !important;
  }
  
  /* Tables in panels */
  .fixed.inset-0 table {
    font-size: 11px !important;
  }
  
  .fixed.inset-0 table th,
  .fixed.inset-0 table td {
    padding: 6px 4px !important;
  }
  
  /* Hide table columns 4+ */
  .fixed.inset-0 table th:nth-child(n+4),
  .fixed.inset-0 table td:nth-child(n+4) {
    display: none !important;
  }
  
  /* Form inputs - prevent iOS zoom */
  .fixed.inset-0 input,
  .fixed.inset-0 select,
  .fixed.inset-0 textarea {
    font-size: 16px !important;
  }
  
  /* Buttons - touch friendly */
  .fixed.inset-0 button {
    min-height: 38px !important;
  }
}

/* ===========================================
   EXTRA SMALL SCREENS (iPhone SE, etc.)
   =========================================== */

@media (max-width: 380px) {
  /* Modal title even smaller */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .sticky.top-0 h2.text-white.font-bold {
    font-size: 10px !important;
  }
  
  /* Action buttons even smaller */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .flex.items-center.gap-2.flex-wrap > button {
    padding: 4px 6px !important;
    font-size: 8px !important;
  }
  
  /* Patient info - single column */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="grid-cols-2"][class*="md:grid-cols-4"],
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="grid-cols-4"] {
    grid-template-columns: 1fr !important;
  }
  
  /* Section headers smaller */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex h3[class*="font-semibold"] {
    font-size: 12px !important;
  }
  
  /* Minimized bar - tighter */
  .fixed.bottom-4.right-4 {
    right: 6px !important;
    left: 6px !important;
  }
  
  .fixed.bottom-4.right-4 button {
    padding: 4px 6px !important;
    font-size: 8px !important;
  }
}

/* ===========================================
   LANDSCAPE ORIENTATION - Show sidebar again
   =========================================== */

@media (max-width: 768px) and (orientation: landscape) and (min-width: 568px) {
  /* Show left sidebar in landscape */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex > div:first-child {
    display: block !important;
    width: 100px !important;
    min-width: 100px !important;
    max-width: 100px !important;
  }
  
  /* Header buttons - smaller in landscape */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .flex.items-center.gap-2.flex-wrap > button {
    padding: 4px 6px !important;
    font-size: 8px !important;
  }
}

/* ===========================================
   TOUCH INTERACTIONS
   =========================================== */

@media (hover: none) and (pointer: coarse) {
  /* Active states for touch feedback */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex button:active {
    transform: scale(0.95) !important;
    opacity: 0.8 !important;
  }
  
  /* Disable hover effects on touch devices */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex button:hover {
    transform: none !important;
  }
}

/* ===========================================
   SAFE AREAS (iPhone notch, home indicator)
   =========================================== */

@supports (padding: env(safe-area-inset-bottom)) {
  @media (max-width: 768px) {
    /* Modal header - account for notch */
    .fixed.top-0.right-0.h-full.w-full.z-50.flex .sticky.top-0.bg-slate-900\/95 {
      padding-top: calc(8px + env(safe-area-inset-top)) !important;
    }
    
    /* Modal content - account for home indicator */
    .fixed.top-0.right-0.h-full.w-full.z-50.flex .flex-1.overflow-y-auto {
      padding-bottom: calc(10px + env(safe-area-inset-bottom)) !important;
    }
    
    /* Minimized bar - above home indicator */
    .fixed.bottom-4.right-4 {
      bottom: calc(12px + env(safe-area-inset-bottom)) !important;
    }
  }
}
