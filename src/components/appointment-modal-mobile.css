/* ============================================ */
/* APPOINTMENT DETAIL MODAL - MOBILE FIXES     */
/* APPEND THIS TO THE END OF availability.css  */
/* ============================================ */
/* ✅ Zero TSX changes                         */
/* ✅ Matches existing theme                   */
/* ✅ CSS-only implementation                  */
/* ============================================ */

/* ===========================================
   MOBILE BREAKPOINT - TABLETS & PHONES
   =========================================== */

@media screen and (max-width: 768px) {
  
  /* ===========================================
     CRITICAL: HIDE LEFT CALENDAR SIDEBAR
     The sidebar has inline styles, so we target
     it by its position in the flex container
     =========================================== */
  
  /* Target the modal's flex container */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex {
    flex-direction: column !important;
  }
  
  /* Hide the first child (calendar sidebar) - multiple selectors for safety */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex > div:first-child:not(.flex-1) {
    display: none !important;
    width: 0 !important;
    min-width: 0 !important;
    max-width: 0 !important;
    overflow: hidden !important;
    visibility: hidden !important;
    position: absolute !important;
    left: -9999px !important;
  }
  
  /* Target by inline style attribute (backup selector) */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex > div[style*="width: 12%"],
  .fixed.top-0.right-0.h-full.w-full.z-50.flex > div[style*="width:12%"],
  .fixed.top-0.right-0.h-full.w-full.z-50.flex > div[style*="minWidth: 140px"],
  .fixed.top-0.right-0.h-full.w-full.z-50.flex > div[style*="min-width: 140px"],
  .fixed.top-0.right-0.h-full.w-full.z-50.flex > div[style*="borderRight"],
  .fixed.top-0.right-0.h-full.w-full.z-50.flex > div[style*="border-right"] {
    display: none !important;
    width: 0 !important;
    min-width: 0 !important;
    visibility: hidden !important;
  }
  
  /* Make the main panel (flex-1) take full width */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex > .flex-1 {
    width: 100% !important;
    max-width: 100% !important;
    min-width: 100% !important;
    flex: 1 1 100% !important;
  }
  
  /* ===========================================
     MODAL HEADER - Compact layout
     =========================================== */
  
  /* Header container */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .sticky.top-0 {
    padding: 8px 12px !important;
  }
  
  /* Window controls (minimize/restore/close) */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .sticky.top-0 > div:first-child {
    margin-bottom: 6px !important;
  }
  
  /* Appointment title row - stack vertically */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .sticky.top-0 > .flex.items-center.justify-between {
    flex-direction: column !important;
    align-items: flex-start !important;
    gap: 8px !important;
  }
  
  /* Appointment title text */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .sticky.top-0 h2 {
    font-size: 12px !important;
    line-height: 1.4 !important;
  }
  
  /* Status badge in title */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .sticky.top-0 h2 > span {
    font-size: 9px !important;
    padding: 2px 6px !important;
  }
  
  /* ===========================================
     EHR BUTTONS - Horizontal scroll
     These are the Meds, Orders, Rx Hx, Appts,
     Allergies, Vitals, Medications buttons
     =========================================== */
  
  /* Button container - horizontal scroll */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .flex.items-center.gap-2.flex-wrap {
    display: flex !important;
    flex-wrap: nowrap !important;
    overflow-x: auto !important;
    overflow-y: hidden !important;
    -webkit-overflow-scrolling: touch !important;
    scroll-behavior: smooth !important;
    scrollbar-width: none !important;
    -ms-overflow-style: none !important;
    width: 100% !important;
    padding: 4px 0 8px 0 !important;
    gap: 6px !important;
  }
  
  /* Hide scrollbar */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .flex.items-center.gap-2.flex-wrap::-webkit-scrollbar {
    display: none !important;
    height: 0 !important;
  }
  
  /* All EHR action buttons - smaller, don't wrap */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .flex.items-center.gap-2.flex-wrap > button {
    flex-shrink: 0 !important;
    padding: 6px 10px !important;
    font-size: 10px !important;
    white-space: nowrap !important;
    border-radius: 8px !important;
    min-height: 32px !important;
  }
  
  /* Button icons */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .flex.items-center.gap-2.flex-wrap > button svg {
    width: 12px !important;
    height: 12px !important;
    flex-shrink: 0 !important;
  }
  
  /* ===========================================
     MODAL CONTENT AREA
     =========================================== */
  
  /* Content scrollable area - less padding */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .flex-1.overflow-y-auto {
    padding: 12px !important;
  }
  
  /* Main grid - single column */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .grid {
    display: grid !important;
    grid-template-columns: 1fr !important;
    gap: 12px !important;
  }
  
  /* Left panel and right panel stack */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .grid > div {
    width: 100% !important;
    max-width: 100% !important;
  }
  
  /* ===========================================
     PATIENT INFO CARD
     =========================================== */
  
  /* Patient card container */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="rounded-xl"][class*="border"] {
    padding: 12px !important;
    border-radius: 12px !important;
  }
  
  /* Patient name */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="text-xl"][class*="font-bold"] {
    font-size: 16px !important;
  }
  
  /* Patient info grid - 2 columns instead of 4 */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="grid-cols-4"],
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="md:grid-cols-4"] {
    grid-template-columns: 1fr 1fr !important;
    gap: 10px !important;
  }
  
  /* Info labels */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="text-gray-400"][class*="text-xs"] {
    font-size: 9px !important;
  }
  
  /* Info values */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="text-white"][class*="font-semibold"] {
    font-size: 12px !important;
    word-break: break-word !important;
  }
  
  /* Intake form answers grid - keep 3 columns but smaller */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="grid-cols-3"] {
    grid-template-columns: 1fr 1fr 1fr !important;
    gap: 6px !important;
  }
  
  /* ===========================================
     SOAP NOTES SECTION TABS
     (SOAP, Orders, Files, Notes, Billing, Audit)
     =========================================== */
  
  /* Section tab container - horizontal scroll */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="flex"][class*="border-b"] {
    overflow-x: auto !important;
    scrollbar-width: none !important;
    -webkit-overflow-scrolling: touch !important;
    flex-wrap: nowrap !important;
  }
  
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="flex"][class*="border-b"]::-webkit-scrollbar {
    display: none !important;
  }
  
  /* Individual tabs */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="flex"][class*="border-b"] > button {
    flex-shrink: 0 !important;
    padding: 8px 14px !important;
    font-size: 11px !important;
    white-space: nowrap !important;
  }
  
  /* ===========================================
     CDSS SECTION
     =========================================== */
  
  /* CDSS container */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="bg-teal-900"],
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="bg-teal-800"] {
    padding: 10px !important;
  }
  
  /* CDSS header row - stack on mobile */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="bg-teal-900"] > .flex.items-start.justify-between,
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="bg-teal-800"] > .flex.items-start.justify-between {
    flex-direction: column !important;
    gap: 10px !important;
  }
  
  /* Generate CDSS button */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="bg-teal-600"][class*="rounded"] {
    width: 100% !important;
    justify-content: center !important;
  }
  
  /* Clinical category info */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="bg-teal-900"] [class*="grid-cols-2"],
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="bg-teal-800"] [class*="grid-cols-2"] {
    grid-template-columns: 1fr 1fr !important;
    gap: 8px !important;
  }
  
  /* ===========================================
     TEXT AREAS & INPUTS
     =========================================== */
  
  /* Text areas */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex textarea {
    font-size: 14px !important;
    min-height: 80px !important;
  }
  
  /* All inputs - prevent iOS zoom */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex input,
  .fixed.top-0.right-0.h-full.w-full.z-50.flex select,
  .fixed.top-0.right-0.h-full.w-full.z-50.flex textarea {
    font-size: 16px !important;
  }
  
  /* ===========================================
     MOVE / RESCHEDULE / CANCEL FORMS
     =========================================== */
  
  /* Form containers */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="bg-cyan-900"],
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="bg-orange-900"],
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="bg-red-900"] {
    padding: 10px !important;
  }
  
  /* Form rows - stack */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="bg-cyan-900"] .flex.items-center.gap-3,
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="bg-orange-900"] .flex.items-center.gap-3 {
    flex-direction: column !important;
    align-items: stretch !important;
    gap: 8px !important;
  }
  
  /* Date inputs full width */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex input[type="datetime-local"],
  .fixed.top-0.right-0.h-full.w-full.z-50.flex input[type="date"],
  .fixed.top-0.right-0.h-full.w-full.z-50.flex input[type="time"] {
    width: 100% !important;
  }
  
  /* ===========================================
     SECTION HEADERS
     =========================================== */
  
  .fixed.top-0.right-0.h-full.w-full.z-50.flex h3 {
    font-size: 14px !important;
  }
  
  /* ===========================================
     MINIMIZED STATE - Full width bar
     =========================================== */
  
  .fixed.bottom-4.right-4 {
    bottom: calc(12px + env(safe-area-inset-bottom, 0px)) !important;
    right: 8px !important;
    left: 8px !important;
    max-width: none !important;
    width: auto !important;
    border-radius: 14px !important;
  }
  
  .fixed.bottom-4.right-4 > div {
    padding: 10px 12px !important;
    flex-wrap: wrap !important;
    gap: 8px !important;
  }
  
  /* Minimized bar buttons */
  .fixed.bottom-4.right-4 button {
    padding: 6px 10px !important;
    font-size: 10px !important;
  }
}

/* ===========================================
   OVERLAY PANELS (Full screen on mobile)
   MedicationHistory, Orders, Prescriptions,
   Allergies, Vitals, Medications, Appointments
   =========================================== */

@media screen and (max-width: 768px) {
  /* All overlay/slide panels - full width */
  .fixed.inset-0 > div[class*="max-w-"],
  .fixed.inset-0 > div[class*="w-full"],
  .fixed.inset-y-0.right-0,
  .fixed.top-0.right-0.bottom-0,
  .fixed.top-0.right-0.h-full[class*="w-"] {
    width: 100% !important;
    max-width: 100% !important;
    min-width: 100% !important;
  }
  
  /* Panel headers */
  .fixed.inset-0 .sticky.top-0 {
    padding: 12px !important;
  }
  
  .fixed.inset-0 h2 {
    font-size: 16px !important;
  }
  
  /* Panel content */
  .fixed.inset-0 .overflow-y-auto {
    padding: 12px !important;
  }
  
  /* Tables */
  .fixed.inset-0 table {
    font-size: 11px !important;
  }
  
  .fixed.inset-0 th,
  .fixed.inset-0 td {
    padding: 8px 6px !important;
  }
  
  /* Panel buttons - touch friendly */
  .fixed.inset-0 button {
    min-height: 40px !important;
  }
}

/* ===========================================
   EXTRA SMALL SCREENS (iPhone SE, etc)
   =========================================== */

@media screen and (max-width: 380px) {
  /* Even smaller buttons */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .flex.items-center.gap-2.flex-wrap > button {
    padding: 5px 8px !important;
    font-size: 9px !important;
  }
  
  /* Title smaller */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .sticky.top-0 h2 {
    font-size: 11px !important;
  }
  
  /* Patient info single column */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="grid-cols-4"],
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="md:grid-cols-4"] {
    grid-template-columns: 1fr !important;
  }
  
  /* Section tabs smaller */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex [class*="flex"][class*="border-b"] > button {
    padding: 6px 10px !important;
    font-size: 10px !important;
  }
}

/* ===========================================
   LANDSCAPE MODE
   =========================================== */

@media screen and (max-width: 896px) and (orientation: landscape) {
  /* Still hide sidebar in landscape on phones */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex > div:first-child:not(.flex-1) {
    display: none !important;
  }
  
  /* Compact header in landscape */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .sticky.top-0 {
    padding: 6px 12px !important;
  }
  
  /* Smaller content padding */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex .flex-1.overflow-y-auto {
    padding: 8px !important;
  }
}

/* ===========================================
   TOUCH DEVICE INTERACTIONS
   =========================================== */

@media (hover: none) and (pointer: coarse) {
  /* Touch feedback */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex button:active {
    transform: scale(0.96) !important;
    opacity: 0.85 !important;
  }
  
  /* Disable hover effects */
  .fixed.top-0.right-0.h-full.w-full.z-50.flex button:hover {
    transform: none !important;
  }
}

/* ===========================================
   SAFE AREAS (iPhone notch & home indicator)
   =========================================== */

@supports (padding-top: env(safe-area-inset-top)) {
  @media screen and (max-width: 768px) {
    /* Header accounts for notch */
    .fixed.top-0.right-0.h-full.w-full.z-50.flex .sticky.top-0 {
      padding-top: calc(8px + env(safe-area-inset-top, 0px)) !important;
    }
    
    /* Content accounts for home indicator */
    .fixed.top-0.right-0.h-full.w-full.z-50.flex .flex-1.overflow-y-auto {
      padding-bottom: calc(12px + env(safe-area-inset-bottom, 0px)) !important;
    }
  }
}

